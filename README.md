# openOii - AI Agent æ¼«å‰§ç”Ÿæˆå¹³å°

<div align="center">

<img src="./doc/logo.png" width="200" alt="openOii Logo" />

**åŸºäºå¤šæ™ºèƒ½ä½“åä½œçš„æ¼«å‰§åˆ›ä½œå¹³å°ï¼Œè®©åˆ›æ„å˜æˆç°å®**

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-green.svg)](https://fastapi.tiangolo.com/)
[![React](https://img.shields.io/badge/React-18.3+-61dafb.svg)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.7+-3178c6.svg)](https://www.typescriptlang.org/)

### â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼


</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

openOii æ˜¯ä¸€ä¸ªåŸºäº AI Agent çš„æ™ºèƒ½æ¼«å‰§ç”Ÿæˆå¹³å°ï¼Œé€šè¿‡å¤šæ™ºèƒ½ä½“åä½œæµç¨‹ï¼Œå°†ç”¨æˆ·çš„åˆ›æ„æ•…äº‹è‡ªåŠ¨è½¬åŒ–ä¸ºå®Œæ•´çš„è§†é¢‘ä½œå“ã€‚æ¯ä¸ª Agent ä¸“æ³¨äºç‰¹å®šä»»åŠ¡ï¼ˆå‰§æœ¬åˆ›ä½œã€è§’è‰²è®¾è®¡ã€åˆ†é•œç»˜åˆ¶ã€è§†é¢‘ç”Ÿæˆç­‰ï¼‰ï¼ŒååŒå®Œæˆä»åˆ›æ„åˆ°æˆå“çš„å…¨æµç¨‹ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤šæ™ºèƒ½ä½“åä½œ** - 8 ä¸ªä¸“ä¸š AI Agent åˆ†å·¥åä½œå®Œæˆåˆ›ä½œæµç¨‹
- ğŸ¬ **æ™ºèƒ½å‰§æœ¬åˆ›ä½œ** - Director å’Œ Scriptwriter Agent è‡ªåŠ¨ç”Ÿæˆè§’è‰²ã€åœºæ™¯å’Œåˆ†é•œè„šæœ¬
- ğŸ¨ **è§’è‰²å½¢è±¡ç”Ÿæˆ** - Character Artist Agent åŸºäºæè¿°ç”Ÿæˆä¸€è‡´æ€§è§’è‰²å›¾åƒ
- ğŸ–¼ï¸ **åˆ†é•œå›¾ç”Ÿæˆ** - Storyboard Artist Agent ä¸ºæ¯ä¸ªé•œå¤´ç”Ÿæˆç²¾ç¾çš„åˆ†é•œé¦–å¸§
- ğŸ¥ **è§†é¢‘è‡ªåŠ¨ç”Ÿæˆ** - Video Generator Agent æ”¯æŒæ–‡ç”Ÿè§†é¢‘å’Œå›¾ç”Ÿè§†é¢‘ä¸¤ç§æ¨¡å¼
- ğŸ”„ **å®æ—¶åé¦ˆç³»ç»Ÿ** - WebSocket å®æ—¶æ¨é€å„ Agent çš„ç”Ÿæˆè¿›åº¦
- ğŸ¯ **ç²¾å‡†é‡ç”Ÿæˆ** - Review Agent å¤„ç†ç”¨æˆ·åé¦ˆï¼Œæ”¯æŒå¯¹å•ä¸ªå†…å®¹è¿›è¡Œé‡æ–°ç”Ÿæˆ

---

## ğŸ¯ åº”ç”¨åœºæ™¯

![é¡¹ç›®æ¦‚è§ˆ](./doc/screenshot_20260122_205031.png)

### åˆ›ä½œæµç¨‹

1. **åˆ›å»ºé¡¹ç›®** - è¾“å…¥æ•…äº‹åˆ›æ„ã€é£æ ¼åå¥½
2. **AI ç”Ÿæˆ** - å¤šæ™ºèƒ½ä½“åä½œç”Ÿæˆå®Œæ•´å†…å®¹
3. **å®æ—¶é¢„è§ˆ** - æŸ¥çœ‹è§’è‰²ã€åˆ†é•œå’Œè§†é¢‘ç”Ÿæˆè¿›åº¦
4. **ç²¾ç»†è°ƒæ•´** - å¯¹ä¸æ»¡æ„çš„å†…å®¹è¿›è¡Œé‡æ–°ç”Ÿæˆ
5. **å¯¼å‡ºä½œå“** - è·å–å®Œæ•´çš„è§†é¢‘ä½œå“

![è§’è‰²å±•ç¤º](./doc/screenshot_20260122_205049.png)

![åˆ†é•œå±•ç¤º](./doc/screenshot_20260122_205128.png)

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: FastAPI + SQLModel
- **æ•°æ®åº“**: PostgreSQL (å¼‚æ­¥ asyncpg)
- **ç¼“å­˜**: Redis (ç”¨äºè·¨è¿›ç¨‹ä¿¡å·å…±äº«)
- **AI æœåŠ¡**:
  - Claude Agent SDK (å‰§æœ¬åˆ›ä½œ)
  - OpenAI å…¼å®¹æ¥å£ (å›¾åƒç”Ÿæˆ)
  - è±†åŒ…è§†é¢‘æœåŠ¡ / OpenAI å…¼å®¹æ¥å£ (è§†é¢‘ç”Ÿæˆ)
- **å®æ—¶é€šä¿¡**: WebSocket
- **å›¾åƒå¤„ç†**: Pillow

### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18 + TypeScript
- **è·¯ç”±**: React Router v7
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ•°æ®è¯·æ±‚**: TanStack Query
- **æ ·å¼**: Tailwind CSS + DaisyUI
- **æ„å»ºå·¥å…·**: Vite
- **æµ‹è¯•**: Vitest + Playwright

### å¤šæ™ºèƒ½ä½“åä½œæµç¨‹

```
ç”¨æˆ·è¾“å…¥
    â†“
OnboardingAgent (éœ€æ±‚åˆ†æ)
    â†“
DirectorAgent (å¯¼æ¼”è§„åˆ’)
    â†“
ScriptwriterAgent (å‰§æœ¬åˆ›ä½œ)
    â†“
CharacterArtistAgent (è§’è‰²å›¾ç”Ÿæˆ)
    â†“
StoryboardArtistAgent (åˆ†é•œå›¾ç”Ÿæˆ)
    â†“
VideoGeneratorAgent (è§†é¢‘ç”Ÿæˆ)
    â†“
VideoMergerAgent (è§†é¢‘æ‹¼æ¥)
    â†“
ReviewAgent (ç”¨æˆ·åé¦ˆå¤„ç†)
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

**é€‚åˆå¿«é€Ÿä½“éªŒå’Œç”Ÿäº§éƒ¨ç½²**

> ğŸ’¡ **é»˜è®¤ä½¿ç”¨ GitHub é¢„æ„å»ºé•œåƒ**ï¼Œæ— éœ€æœ¬åœ°æ„å»ºï¼Œå¯åŠ¨æ›´å¿«ï¼

1. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
cp backend/.env.example backend/.env
# ç¼–è¾‘ backend/.envï¼Œå¡«å†™å¿…è¦çš„ API å¯†é’¥
```

**å¿…é¡»é…ç½®çš„é¡¹ç›®ï¼š**
- `ANTHROPIC_BASE_URL` å’Œ `ANTHROPIC_AUTH_TOKEN` - LLM æœåŠ¡
- `IMAGE_API_KEY` - å›¾åƒç”ŸæˆæœåŠ¡
- `VIDEO_PROVIDER` - è§†é¢‘æœåŠ¡æä¾›å•†ï¼ˆopenai æˆ– doubaoï¼‰
- `DOUBAO_API_KEY` - è±†åŒ…è§†é¢‘æœåŠ¡å¯†é’¥ï¼ˆå¦‚æœé€‰æ‹© doubaoï¼‰

**âš ï¸ Docker éƒ¨ç½²ç‰¹åˆ«æ³¨æ„ï¼š**

å¦‚æœå›¾åƒ/è§†é¢‘æœåŠ¡è¿è¡Œåœ¨å®¿ä¸»æœºä¸Šï¼Œéœ€è¦ä¿®æ”¹æœåŠ¡åœ°å€ï¼š

```env
# âŒ é”™è¯¯ï¼šå®¹å™¨å†… localhost æŒ‡å‘å®¹å™¨è‡ªå·±
IMAGE_BASE_URL=http://localhost:8000

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ host.docker.internal è®¿é—®å®¿ä¸»æœº
IMAGE_BASE_URL=http://host.docker.internal:8000

# âœ… æˆ–ä½¿ç”¨å®¿ä¸»æœºå®é™… IP
IMAGE_BASE_URL=http://192.168.1.100:8000

# âœ… æˆ–ä½¿ç”¨åœ¨çº¿æœåŠ¡ï¼ˆæ¨èï¼‰
IMAGE_BASE_URL=https://api.modelscope.cn
```

**å¦‚æœå›¾åƒ/è§†é¢‘æœåŠ¡ä¹Ÿåœ¨ Docker ä¸­ï¼š**

1. ä¿®æ”¹ `docker-compose.yml`ï¼Œè®©åç«¯åŠ å…¥å›¾åƒæœåŠ¡çš„ç½‘ç»œï¼š

```yaml
services:
  backend:
    networks:
      - default
      - your_image_service_network  # å›¾åƒæœåŠ¡çš„ç½‘ç»œå

networks:
  your_image_service_network:
    external: true
```

2. åœ¨ `docker-compose.yml` çš„ `environment` ä¸­é…ç½®æœåŠ¡åœ°å€ï¼š

```yaml
environment:
  IMAGE_BASE_URL: http://your_container_name:port
  VIDEO_BASE_URL: http://your_container_name:port
```

**æ³¨æ„ï¼š** `DATABASE_URL` å’Œ `REDIS_URL` ä¼šè¢« Docker Compose è‡ªåŠ¨é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ã€‚

2. **å¯åŠ¨æœåŠ¡**

```bash
# ä½¿ç”¨ GitHub é¢„æ„å»ºé•œåƒï¼ˆæ¨èï¼‰
docker-compose up -d

# æˆ–è€…æœ¬åœ°æ„å»ºé•œåƒï¼ˆé€‚åˆå¼€å‘è°ƒè¯•ï¼‰
docker-compose -f docker-compose.dev.yml up -d
```

3. **è®¿é—®åº”ç”¨**

- å‰ç«¯ç•Œé¢ï¼šhttp://localhost:15173
- API æ–‡æ¡£ï¼šhttp://localhost:18765/docs

**å¸¸è§æ“ä½œï¼š**

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f backend

# ä¿®æ”¹é…ç½®åé‡å¯
docker-compose restart backend

# æ›´æ–°åˆ°æœ€æ–°é•œåƒ
docker-compose pull
docker-compose up -d

# åœæ­¢æœåŠ¡
docker-compose down
```

---

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½²

**é€‚åˆå¼€å‘è°ƒè¯•**

#### ç¯å¢ƒè¦æ±‚

- **Python**: 3.10+
- **Node.js**: 18+
- **PostgreSQL**: 14+
- **Redis**: 6+
- **FFmpeg**: 4.0+ (ç”¨äºè§†é¢‘æ‹¼æ¥å’Œå¤„ç†)

#### åç«¯éƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/Xeron2000/openOii.git
cd openOii/backend
```

2. **å®‰è£…ä¾èµ–**

```bash
# ä½¿ç”¨ uv (æ¨è)
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -e .
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å†™å¿…è¦çš„é…ç½®
```

**å…³é”®é…ç½®é¡¹ï¼š**

```env
# æ•°æ®åº“
DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/openoii

# Redis
REDIS_URL=redis://localhost:6379/0

# LLM æœåŠ¡ (Claude Agent SDK)
ANTHROPIC_BASE_URL=https://your-proxy.example.com
ANTHROPIC_AUTH_TOKEN=your_proxy_token

# å›¾åƒç”ŸæˆæœåŠ¡
IMAGE_BASE_URL=https://api.openai.com/v1
IMAGE_API_KEY=your_image_api_key

# è§†é¢‘æœåŠ¡æä¾›å•† (é€‰æ‹© openai æˆ– doubao)
VIDEO_PROVIDER=doubao

# è±†åŒ…è§†é¢‘æœåŠ¡ (å¦‚æœé€‰æ‹© doubao)
DOUBAO_API_KEY=your_doubao_api_key
```

4. **å¯åŠ¨æœåŠ¡**

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 18765
```

#### å‰ç«¯éƒ¨ç½²

1. **è¿›å…¥å‰ç«¯ç›®å½•**

```bash
cd ../frontend
```

2. **å®‰è£…ä¾èµ–**

```bash
pnpm install
```

3. **é…ç½®ç¯å¢ƒ**

```bash
# ä¿®æ”¹ vite.config.ts ä¸­çš„åç«¯åœ°å€ï¼ˆå¦‚éœ€è¦ï¼‰
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
pnpm dev
```

5. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:15173`

---

## ğŸ”§ API æ–‡æ¡£

å¯åŠ¨åç«¯æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹å®Œæ•´ API æ–‡æ¡£ï¼š

- **Swagger UI**: `http://localhost:18765/docs`
- **ReDoc**: `http://localhost:18765/redoc`

---

## ğŸ§ª æµ‹è¯•

### åç«¯æµ‹è¯•

```bash
cd backend
pytest                    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest --cov             # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

### å‰ç«¯æµ‹è¯•

```bash
cd frontend
pnpm test                # å•å…ƒæµ‹è¯•
pnpm test:ui             # æµ‹è¯• UI
pnpm test:coverage       # è¦†ç›–ç‡æŠ¥å‘Š
pnpm e2e                 # E2E æµ‹è¯•
```

---

## ğŸ¨ ç”Ÿæˆæ¨¡å¼è¯´æ˜

### å›¾åƒç”Ÿæˆæ¨¡å¼

#### æ–‡ç”Ÿå›¾ (Text-to-Image)

çº¯æ–‡æœ¬æè¿°ç”Ÿæˆåˆ†é•œå›¾ï¼Œé€‚åˆå¿«é€ŸåŸå‹ã€‚

```env
ENABLE_IMAGE_TO_IMAGE=false
```

#### å›¾ç”Ÿå›¾ (Image-to-Image)

ä½¿ç”¨è§’è‰²å›¾ä½œä¸ºå‚è€ƒç”Ÿæˆåˆ†é•œé¦–å¸§ï¼Œæå‡äººç‰©ä¸€è‡´æ€§ã€‚

```env
ENABLE_IMAGE_TO_IMAGE=true
```

**æ³¨æ„ï¼š** å›¾ç”Ÿå›¾æ¨¡å¼éœ€è¦å›¾åƒæœåŠ¡æ”¯æŒ Image-to-Image åŠŸèƒ½ã€‚é­”æ­ç›®å‰æ²¡æœ‰å›¾ç”Ÿå›¾æ¨¡å‹ï¼Œäººç‰©ä¸€è‡´æ€§ä¼šç¨å·®ã€‚

### è§†é¢‘ç”Ÿæˆæ¨¡å¼

#### æ–‡ç”Ÿè§†é¢‘ (Text-to-Video)

çº¯æ–‡æœ¬æè¿°ç”Ÿæˆè§†é¢‘ï¼Œé€‚åˆå¿«é€ŸåŸå‹ã€‚

```env
ENABLE_IMAGE_TO_VIDEO=false
```

#### å›¾ç”Ÿè§†é¢‘ (Image-to-Video)

ä½¿ç”¨è§’è‰²å›¾å’Œåˆ†é•œå›¾ä½œä¸ºå‚è€ƒï¼Œæå‡äººç‰©ä¸€è‡´æ€§ã€‚

```env
ENABLE_IMAGE_TO_VIDEO=true
VIDEO_IMAGE_MODE=reference  # æˆ– first_frame
```

**æ¨¡å¼è¯´æ˜ï¼š**
- `first_frame`: ä»…ä½¿ç”¨åˆ†é•œé¦–å¸§ä½œä¸ºå‚è€ƒ
- `reference`: æ‹¼æ¥è§’è‰²å›¾å’Œåˆ†é•œå›¾ä½œä¸ºå‚è€ƒï¼ˆæ¨èï¼‰

---

## ğŸ”Œ æ”¯æŒçš„ AI æœåŠ¡

### LLM æœåŠ¡

- **Anthropic Claude** (ç›´è¿æˆ–ä¸­è½¬)
- **æ™ºè°± GLM** (é€šè¿‡ Anthropic å…¼å®¹æ¥å£)

### å›¾åƒç”Ÿæˆ

- ä»»ä½• OpenAI å…¼å®¹çš„å›¾åƒç”Ÿæˆæ¥å£
- **é­”æ­** (æ¨èï¼Œå›½å†…å¯ç”¨,åªæ˜¯æ²¡æœ‰å›¾ç”Ÿå›¾çš„æ¨¡å‹äººç‰©ä¸€è‡´æ€§ä¼šå·®ä¸€ç‚¹) - [https://modelscope.cn](https://modelscope.cn)

### è§†é¢‘ç”Ÿæˆ

- **è±†åŒ…è§†é¢‘æœåŠ¡** (ç«å±±å¼•æ“ Ark API) - æ¨è
- ä»»ä½• OpenAI å…¼å®¹çš„è§†é¢‘ç”Ÿæˆæ¥å£

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

- **åç«¯**: ä½¿ç”¨ Ruff è¿›è¡Œä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥
- **å‰ç«¯**: éµå¾ª TypeScript ä¸¥æ ¼æ¨¡å¼

### æäº¤è§„èŒƒ

éµå¾ª Conventional Commits è§„èŒƒï¼š

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾ç›¸å…³
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- [React](https://react.dev/) - ç”¨æˆ·ç•Œé¢åº“
- [Claude Agent SDK](https://github.com/anthropics/anthropic-sdk-python) - AI æ™ºèƒ½ä½“å¼€å‘
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- [DaisyUI](https://daisyui.com/) - Tailwind CSS ç»„ä»¶åº“

---

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ [Issue](https://github.com/Xeron2000/openOii/issues)

---

<div align="center">

**ç”¨ AI åˆ›é€ æ— é™å¯èƒ½ ğŸš€**

Made with â¤ï¸ by openOii Team

</div>
